import{r as a,a as d,j as r,b as c}from"./DynamicThemeProvider-8db021c0.js";import{D as b}from"./PasswordInput-b4462587.js";import{D as g}from"./DashboardLoading-2b60918b.js";import{N as k}from"./DashboardNavbar-76557c1e.js";import{u as x}from"./useDocumentTitle-2cb3b118.js";import{a as C,u as m}from"./mainAuthenticated-da65d0b7.js";import{R}from"./RepoConfigInfo-959e43f5.js";import{R as j}from"./RepoError-de2c233d.js";import{R as B}from"./RepoUnlockForm-4021b1e8.js";import{b as h}from"./index-785e270c.js";import"./Button-0a845b25.js";import"./GitRevision-b7397e1d.js";import"./index-94b5b978.js";import"./Navbar-214aa63a.js";import"./NavbarSticky-e92eb122.js";import"./error-icon@2x-ffa05ea5.js";const v=a.memo(({repo:e})=>{const o=e.id,t=d(),s=C();let i=a.useMemo(()=>s.repoConfigBackupCreate(o),[s,o]);a.useEffect(()=>()=>{s.repoConfigBackupDestroy(i)},[s,i]);const[p]=m((n,l)=>n.repoConfigBackupInfoSubscribe(i,l),n=>n.repoConfigBackupInfoData,[i]),u=a.useCallback(n=>{s.repoConfigBackupGenerate(i,n)},[s,i]),f=a.useMemo(()=>[{id:e.id,name:e.name,link:`/repos/${e.id}`,isClickable:!0,hasCaret:!1,isLast:!1},{id:"configbackup",name:"Backup config",isClickable:!1,hasCaret:!1,isLast:!0}],[e]);return x("Backup config"),r.jsx(b,{navbarHeader:r.jsx(k,{breadcrumbs:f}),children:p!==void 0?p.config===void 0?r.jsx(B,{info:p.unlockInfo,onUnlock:u}):r.jsxs("div",{className:t?c`
                    padding: 0 15px;
                  `:void 0,children:[r.jsx("h1",{className:c`
                font-size: 32px;
                font-weight: normal;
                margin: 0 0 20px;
              `,children:"Backup config"}),r.jsx(R,{config:p.config})]}):null})}),D=a.memo(({repoId:e})=>{const[o]=m((t,s)=>t.reposRepoSubscribe(e,s),t=>t.reposRepoData,[e]);return o.status.type==="Error"?r.jsx(j,{error:o.status.error}):o.repo!==void 0?r.jsx(v,{repo:o.repo}):r.jsx(g,{})}),W=a.memo(()=>{const o=h().repoId;return o===void 0?null:r.jsx(D,{repoId:o},o)});export{W as RepoConfigBackupPage};
