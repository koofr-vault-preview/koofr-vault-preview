import{r as a,a as d,j as r,b as c}from"./DynamicThemeProvider-75e49737.js";import{D as b}from"./DashboardError-c2724da0.js";import{D as g}from"./DashboardLayout-1adfb090.js";import{D as k}from"./DashboardLoading-f07f8969.js";import{N as x}from"./DashboardNavbar-d06b2ed5.js";import{u as C}from"./useDocumentTitle-2cb3b118.js";import{a as j,u as m}from"./mainWebAuthenticated-9518d43c.js";import{R as B}from"./RepoConfigInfo-1181a2f9.js";import{R}from"./RepoUnlockForm-4abf93a6.js";import{b as h}from"./index-ea7fdfe9.js";import"./error-icon@2x-ffa05ea5.js";import"./Button-36aa6271.js";import"./GitRevision-92f4b357.js";import"./index-d65acbab.js";import"./Navbar-eb58d508.js";import"./NavbarSticky-a2949c3e.js";import"./PasswordInput-d2400a8b.js";const D=a.memo(({repo:s})=>{const o=s.id,t=d(),e=j();let i=a.useMemo(()=>e.repoConfigBackupCreate(o),[e,o]);a.useEffect(()=>()=>{e.repoConfigBackupDestroy(i)},[e,i]);const[p]=m((n,l)=>n.repoConfigBackupInfoSubscribe(i,l),n=>n.repoConfigBackupInfoData,[i]),u=a.useCallback(n=>{e.repoConfigBackupGenerate(i,n)},[e,i]),f=a.useMemo(()=>[{id:s.id,name:s.name,link:`/repos/${s.id}`,isClickable:!0,hasCaret:!1,isLast:!1},{id:"configbackup",name:"Backup config",isClickable:!1,hasCaret:!1,isLast:!0}],[s]);return C("Backup config"),r.jsx(g,{navbarHeader:r.jsx(x,{breadcrumbs:f}),children:p!==void 0?p.config===void 0?r.jsx(R,{info:p.unlockInfo,onUnlock:u}):r.jsxs("div",{className:t?c`
                    padding: 0 15px;
                  `:void 0,children:[r.jsx("h1",{className:c`
                font-size: 32px;
                font-weight: normal;
                margin: 0 0 20px;
              `,children:"Backup config"}),r.jsx(B,{config:p.config})]}):null})}),v=a.memo(({repoId:s})=>{const[o]=m((t,e)=>t.reposRepoSubscribe(s,e),t=>t.reposRepoData,[s]);return(o==null?void 0:o.status.type)==="Error"?r.jsx(b,{error:o.status.error}):(o==null?void 0:o.repo)!==void 0?r.jsx(D,{repo:o.repo}):r.jsx(k,{})}),$=a.memo(()=>{const o=h().repoId;return o===void 0?null:r.jsx(v,{repoId:o},o)});export{$ as RepoConfigBackupPage};
