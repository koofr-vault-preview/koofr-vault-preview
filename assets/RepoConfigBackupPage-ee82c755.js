import{r as a,a as d,j as r,b as c}from"./DynamicThemeProvider-852093d9.js";import{D as b}from"./DashboardError-9b7ce40c.js";import{D as g}from"./PasswordInput-d09704c3.js";import{D as k}from"./DashboardLoading-69726e0d.js";import{N as x}from"./DashboardNavbar-7579858e.js";import{u as C}from"./useDocumentTitle-2cb3b118.js";import{a as j,u as m}from"./mainAuthenticated-9e154549.js";import{R as B}from"./RepoConfigInfo-2e6a0059.js";import{R}from"./RepoUnlockForm-f6309adf.js";import{b as h}from"./index-1ee9421e.js";import"./error-icon@2x-ffa05ea5.js";import"./Button-5863cf9e.js";import"./GitRevision-aae7f3a0.js";import"./index-4323671c.js";import"./Navbar-0277b8dc.js";import"./NavbarSticky-96fb8002.js";const D=a.memo(({repo:s})=>{const o=s.id,t=d(),e=j();let i=a.useMemo(()=>e.repoConfigBackupCreate(o),[e,o]);a.useEffect(()=>()=>{e.repoConfigBackupDestroy(i)},[e,i]);const[p]=m((n,l)=>n.repoConfigBackupInfoSubscribe(i,l),n=>n.repoConfigBackupInfoData,[i]),u=a.useCallback(n=>{e.repoConfigBackupGenerate(i,n)},[e,i]),f=a.useMemo(()=>[{id:s.id,name:s.name,link:`/repos/${s.id}`,isClickable:!0,hasCaret:!1,isLast:!1},{id:"configbackup",name:"Backup config",isClickable:!1,hasCaret:!1,isLast:!0}],[s]);return C("Backup config"),r.jsx(g,{navbarHeader:r.jsx(x,{breadcrumbs:f}),children:p!==void 0?p.config===void 0?r.jsx(R,{info:p.unlockInfo,onUnlock:u}):r.jsxs("div",{className:t?c`
                    padding: 0 15px;
                  `:void 0,children:[r.jsx("h1",{className:c`
                font-size: 32px;
                font-weight: normal;
                margin: 0 0 20px;
              `,children:"Backup config"}),r.jsx(B,{config:p.config})]}):null})}),v=a.memo(({repoId:s})=>{const[o]=m((t,e)=>t.reposRepoSubscribe(s,e),t=>t.reposRepoData,[s]);return o.status.type==="Error"?r.jsx(b,{error:o.status.error}):o.repo!==void 0?r.jsx(D,{repo:o.repo}):r.jsx(k,{})}),W=a.memo(()=>{const o=h().repoId;return o===void 0?null:r.jsx(v,{repoId:o},o)});export{W as RepoConfigBackupPage};
