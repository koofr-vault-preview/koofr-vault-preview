import{r as t,j as p,u as R,d as E,b as f,c as g,H as T}from"./DynamicThemeProvider-8db021c0.js";import{f as H}from"./index-8c64d985.js";import{a as Z,s as D,u as L}from"./mainAuthenticated-da65d0b7.js";import{n as k,b as U,e as A}from"./Button-0a845b25.js";import{D as B}from"./DashboardLoading-2b60918b.js";import{R as O}from"./RepoError-de2c233d.js";import{D as C}from"./PasswordInput-b4462587.js";import{u as N}from"./DashboardNavbar-76557c1e.js";import{u as P}from"./useDocumentTitle-2cb3b118.js";import{R as $}from"./RepoUnlockForm-4021b1e8.js";const le=(e,r,o)=>{const a=new URLSearchParams;return r!==void 0&&a.set("path",r),o!==void 0&&a.set("name",o),{pathname:`/repos/${e}`,search:a.toString()}},re=(e,r,o,a)=>{const i=new URLSearchParams({path:r});return o&&i.set("editing","true"),a!==void 0&&i.set("autosave",`${a}`),{pathname:`/repos/${e}/details`,search:i.toString()}},z=e=>e==="pdf",j=e=>e==="Text"||e==="Code",G=e=>e==="jpg"||e==="jpeg"||e==="gif"||e==="png"||e==="svg",se=e=>e.nameError===void 0&&(z(e.ext)||j(e.category)||G(e.ext)),_=e=>j(e),ie=e=>e.nameError===void 0&&_(e.category),ce=t.memo(({value:e,noTooltip:r})=>{const o=Z(),[a,i]=t.useState(()=>o.relativeTime(Math.min(e,Date.now()),!0)),m=a.nextUpdate;return t.useEffect(()=>{if(m!==void 0){const c=setTimeout(()=>{i(o.relativeTime(Math.min(e,Date.now()),!0))},Math.max(m-Date.now(),0));return()=>{clearTimeout(c)}}},[o,e,m]),p.jsx("span",{title:r?void 0:H(e,"PPPPpp"),children:a.display})}),me=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("g",{fill:"#263238"},t.createElement("path",{fillRule:"evenodd",d:"m11.212 3.076 2.79 2.583h-2.79V3.076ZM5.526 15.98H2.903V2.056h6.854v5.065h6.803v-.53a1.46 1.46 0 0 0-.41-.938L11.094.973a1.643 1.643 0 0 0-.969-.379H1.999a.559.559 0 0 0-.56.559v15.73a.56.56 0 0 0 .56.559h3.527v-1.463Z",clipRule:"evenodd"}),t.createElement("path",{d:"M13.954 9.476 8.73 14.698a1.093 1.093 0 0 0-.164.326l-.109.763.762-.11a1.107 1.107 0 0 0 .327-.163l5.222-5.222-.816-.816Zm2.409.34a.672.672 0 0 1 0 .951l-5.787 5.787c-.263.262-.773.518-1.14.57l-2.037.293c-.368.052-.623-.203-.57-.57l.292-2.037c.053-.367.308-.878.57-1.14l5.787-5.787a.672.672 0 0 1 .95 0l1.935 1.934Z"}),t.createElement("path",{d:"m7.624 13.93 2.773 2.785 1.036-1.033-2.773-2.784-1.036 1.032Zm3.924-3.996 2.773 2.785 1.036-1.032-2.773-2.785-1.036 1.032Z"}))),de=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("g",{fill:"#676F73"},t.createElement("path",{fillRule:"evenodd",d:"m11.212 3.076 2.79 2.583h-2.79V3.076ZM5.526 15.98H2.903V2.056h6.854v5.065h6.803v-.53a1.46 1.46 0 0 0-.41-.938L11.094.973a1.643 1.643 0 0 0-.969-.379H1.999a.559.559 0 0 0-.56.559v15.73a.56.56 0 0 0 .56.559h3.527v-1.463Z",clipRule:"evenodd"}),t.createElement("path",{d:"M13.954 9.476 8.73 14.698a1.093 1.093 0 0 0-.164.326l-.109.763.762-.11a1.107 1.107 0 0 0 .327-.163l5.222-5.222-.816-.816Zm2.409.34a.672.672 0 0 1 0 .951l-5.787 5.787c-.263.262-.773.518-1.14.57l-2.037.293c-.368.052-.623-.203-.57-.57l.292-2.037c.053-.367.308-.878.57-1.14l5.787-5.787a.672.672 0 0 1 .95 0l1.935 1.934Z"}),t.createElement("path",{d:"m7.624 13.93 2.773 2.785 1.036-1.033-2.773-2.784-1.036 1.032Zm3.924-3.996 2.773 2.785 1.036-1.032-2.773-2.785-1.036 1.032Z"}))),pe=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("g",{fill:"#263238"},t.createElement("path",{d:"m12.742 2.55-1.819 1.82-7.513 7.513c-.211.21-.489.766-.53 1.06l-.353 2.538 2.527-.363c.295-.042.85-.32 1.06-.53l9.336-9.336-2.708-2.701Zm3.983 1.923a1.112 1.112 0 0 1 0 1.572l-9.577 9.577c-.434.434-1.278.857-1.886.944l-3.371.483c-.608.088-1.03-.334-.943-.942l.484-3.371c.087-.608.51-1.453.944-1.887l7.513-7.514 2.063-2.063a1.112 1.112 0 0 1 1.573 0l3.2 3.2Z"}),t.createElement("path",{d:"M5.501 15.86 2.66 13.017l-.517-.517 1.034-1.034.517.517 2.931 2.931-1.123.946Zm8.696-8.225L11.371 4.81l-.517-.517 1.034-1.034.517.517 2.786 2.785-.994 1.075Z"}))),he=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("g",{fill:"#676F73"},t.createElement("path",{d:"m12.742 2.55-1.819 1.82-7.513 7.513c-.211.21-.489.766-.53 1.06l-.353 2.538 2.527-.363c.295-.042.85-.32 1.06-.53l9.336-9.336-2.708-2.701Zm3.983 1.923a1.112 1.112 0 0 1 0 1.572l-9.577 9.577c-.434.434-1.278.857-1.886.944l-3.371.483c-.608.088-1.03-.334-.943-.942l.483-3.371c.088-.608.51-1.453.944-1.887L9.89 3.335l2.063-2.063a1.112 1.112 0 0 1 1.573 0l3.2 3.2Z"}),t.createElement("path",{d:"M5.501 15.86 2.66 13.017l-.517-.517 1.034-1.034.517.517 2.931 2.931-1.123.946Zm8.696-8.225L11.37 4.81l-.517-.517 1.034-1.034.517.517 2.786 2.785-.994 1.075Z"}))),fe=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("path",{fill:"#263238",d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),t.createElement("path",{fill:"#263238",d:"M9.757 1.714v5.39h6.246V5.64l-4.79.001V1.707l-1.456.007Z"}),t.createElement("path",{fill:"#DF533E",d:"M7.422 9.516a.731.731 0 0 0-1.034 1.034l4.194 4.194a.731.731 0 1 0 1.034-1.034L7.422 9.516Z"}),t.createElement("path",{fill:"#DF533E",d:"M6.388 13.71a.731.731 0 1 0 1.034 1.034l4.194-4.194a.731.731 0 1 0-1.034-1.034L6.388 13.71Z"})),ue=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("g",{fill:"#676F73"},t.createElement("path",{d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),t.createElement("path",{d:"M9.757 1.714v5.39h6.246V5.64l-4.79.001V1.707l-1.456.007ZM7.422 9.516a.731.731 0 1 0-1.034 1.034l4.194 4.194a.731.731 0 0 0 1.034-1.034L7.422 9.516Z"}),t.createElement("path",{d:"M6.388 13.71a.731.731 0 1 0 1.034 1.034l4.194-4.194a.731.731 0 1 0-1.034-1.034L6.388 13.71Z"}))),ve=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("path",{fill:"#263238",d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),t.createElement("path",{fill:"#263238",d:"M9.757 1.714v5.39h6.246V5.64h-4.79V1.707l-1.456.007Z"}),t.createElement("path",{fill:"#71BA05",d:"M8.278 14.113a.731.731 0 1 0 1.462 0V9.558a.731.731 0 1 0-1.462 0v4.555Z"}),t.createElement("path",{fill:"#71BA05",d:"m8.994 13.629 2.056-2.057a.731.731 0 0 1 1.034 1.034L9.51 15.18l-.517.517-.517-.517-2.574-2.574a.731.731 0 0 1 1.034-1.034l2.058 2.057Z"})),we=e=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},t.createElement("g",{fill:"#676F73"},t.createElement("path",{d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),t.createElement("path",{d:"M9.757 1.714v5.39h6.246V5.64h-4.79V1.707l-1.456.007ZM8.278 14.113a.731.731 0 1 0 1.462 0V9.558a.731.731 0 1 0-1.462 0v4.555Z"}),t.createElement("path",{d:"m8.994 13.629 2.056-2.057a.731.731 0 0 1 1.034 1.034L9.51 15.18l-.517.517-.517-.517-2.574-2.574a.731.731 0 0 1 1.034-1.034l2.058 2.057Z"}))),ge=k.nav`
  display: flex;
  align-items: center;
  margin: 0 -12px 0 auto;
`;function I({as:e,icon:r,iconHover:o,className:a,textClassName:i,children:m,...c}){const u=e||A,v=R();return p.jsx(u,{className:E(f`
          ${U}
          margin: 0 4px 0 12px;
          padding: 0 8px 0 0;
          text-align: left;

          &[disabled] {
            cursor: not-allowed;
            pointer-events: none;
            opacity: 0.7;
          }
        `,a),...c,children:p.jsxs("div",{className:f`
          display: flex;
          align-items: center;
        `,children:[r!==void 0?p.jsx("div",{className:E(f`
                display: flex;
                justify-content: center;
                align-items: center;
                width: 32px;
                height: 32px;
              `,o!==void 0&&f`
                  *:hover > * > & {
                    display: none;
                  }
                `),children:r}):null,o!==void 0?p.jsx("div",{className:f`
              display: none;
              justify-content: center;
              align-items: center;
              width: 32px;
              height: 32px;

              *:hover > * > & {
                display: flex;
              }
            `,children:o}):null,p.jsx("div",{className:E(f`
              font-size: 13px;
              font-weight: 600;
              color: ${v.colors.text};
            `,i),children:m})]})})}const Ee=t.memo(({textClassName:e,...r})=>{const o=R();return p.jsx(I,{textClassName:E(f`
            color: ${o.colors.destructive};
          `,e),...r,children:"Cancel"})});var V={exports:{}};(function(e,r){(function(o,a){a()})(g,function(){function o(n,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function a(n,l,h){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){v(s.response,l,h)},s.onerror=function(){console.error("could not download file")},s.send()}function i(n){var l=new XMLHttpRequest;l.open("HEAD",n,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function m(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(l)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof g=="object"&&g.global===g?g:void 0,u=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(n,l,h){var s=c.URL||c.webkitURL,d=document.createElement("a");l=l||n.name||"download",d.download=l,d.rel="noopener",typeof n=="string"?(d.href=n,d.origin===location.origin?m(d):i(d.href)?a(n,l,h):m(d,d.target="_blank")):(d.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(d.href)},4e4),setTimeout(function(){m(d)},0))}:"msSaveOrOpenBlob"in navigator?function(n,l,h){if(l=l||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(o(n,h),l);else if(i(n))a(n,l,h);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){m(s)})}}:function(n,l,h,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return a(n,l,h);var d=n.type==="application/octet-stream",F=/constructor/i.test(c.HTMLElement)||c.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||d&&F||u)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var w=x.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=w:location=w,s=null},x.readAsDataURL(n)}else{var S=c.URL||c.webkitURL,b=S.createObjectURL(n);s?s.location=b:location.href=b,s=null,setTimeout(function(){S.revokeObjectURL(b)},4e4)}});c.saveAs=v.saveAs=v,e.exports=v})})(V);var q=V.exports;function M(e){if(e.stream!==void 0){const r=e.size.type==="Exact"?parseInt(e.size.size,10):void 0,o=D.createWriteStream(e.name,{size:r});e.stream.pipeTo(o).catch(()=>{})}else e.blob!==void 0&&q.saveAs(e.blob,e.name)}const xe=async(e,r,o,a)=>{const i=a,m=await e.repoFilesGetFileStream(r,o,i);m!==void 0&&M(m)},be=async(e,r,o)=>{const a=o,i=await e.repoFilesBrowsersGetSelectedStream(r,a);i!==void 0&&M(i)},Ze=navigator.userAgentData!=null?navigator.userAgentData.platform==="macOS":navigator.platform.indexOf("Mac")!==-1,W=t.memo(({repoId:e})=>{const r=Z();let o=t.useMemo(()=>r.repoUnlockCreate(e,{mode:"Unlock"}),[r,e]);t.useEffect(()=>()=>{r.repoUnlockDestroy(o)},[r,o]);const[a]=L((c,u)=>c.repoUnlockInfoSubscribe(o,u),c=>c.repoUnlockInfoData,[o]),i=t.useCallback(c=>{r.repoUnlockUnlock(o,c)},[r,o]),m=N((a==null?void 0:a.repoName)??"");return P(a==null?void 0:a.repoName),a===void 0?null:p.jsx(C,{navbarHeader:m,children:a!==void 0?p.jsx($,{info:a,onUnlock:i}):null})}),ye=({repoId:e,component:r})=>{const o=Z(),[a]=L((i,m)=>i.reposRepoSubscribe(e,m),i=>i.reposRepoData,[e]);return a.repo!==void 0?a.repo.state==="Locked"?p.jsx(W,{repoId:a.repo.id},e):T.createElement(r,{repo:a.repo}):a.status.type==="Error"?p.jsx(O,{error:a.status.error,onRetry:()=>o.load()}):p.jsx(B,{})};export{ye as R,ce as S,I as T,j as a,G as b,he as c,pe as d,_ as e,z as f,de as g,me as h,we as i,ve as j,xe as k,ue as l,fe as m,le as n,Ze as o,se as p,ge as q,re as r,be as s,ie as t,Ee as u};
