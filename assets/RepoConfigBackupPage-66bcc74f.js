import{r as a,a as d,j as r,b as c}from"./DynamicThemeProvider-71c37830.js";import{D as b}from"./DashboardError-e6e1bdb5.js";import{D as g}from"./DashboardLayout-7d368c53.js";import{D as k}from"./DashboardLoading-c81cae86.js";import{N as x}from"./DashboardNavbar-dc36c22d.js";import{u as C}from"./useDocumentTitle-2cb3b118.js";import{a as j,u as m}from"./mainAuthenticated-a332b573.js";import{R as B}from"./RepoConfigInfo-0b4feaef.js";import{R}from"./RepoUnlockForm-0bb2e6ff.js";import{b as h}from"./index-6ac7cbed.js";import"./error-icon@2x-ffa05ea5.js";import"./Button-d7c59dae.js";import"./GitRevision-618ccf1f.js";import"./index-5e956eb5.js";import"./Navbar-47732754.js";import"./NavbarSticky-315264f4.js";import"./PasswordInput-cafa4319.js";const D=a.memo(({repo:s})=>{const o=s.id,t=d(),e=j();let i=a.useMemo(()=>e.repoConfigBackupCreate(o),[e,o]);a.useEffect(()=>()=>{e.repoConfigBackupDestroy(i)},[e,i]);const[p]=m((n,l)=>n.repoConfigBackupInfoSubscribe(i,l),n=>n.repoConfigBackupInfoData,[i]),u=a.useCallback(n=>{e.repoConfigBackupGenerate(i,n)},[e,i]),f=a.useMemo(()=>[{id:s.id,name:s.name,link:`/repos/${s.id}`,isClickable:!0,hasCaret:!1,isLast:!1},{id:"configbackup",name:"Backup config",isClickable:!1,hasCaret:!1,isLast:!0}],[s]);return C("Backup config"),r.jsx(g,{navbarHeader:r.jsx(x,{breadcrumbs:f}),children:p!==void 0?p.config===void 0?r.jsx(R,{info:p.unlockInfo,onUnlock:u}):r.jsxs("div",{className:t?c`
                    padding: 0 15px;
                  `:void 0,children:[r.jsx("h1",{className:c`
                font-size: 32px;
                font-weight: normal;
                margin: 0 0 20px;
              `,children:"Backup config"}),r.jsx(B,{config:p.config})]}):null})}),v=a.memo(({repoId:s})=>{const[o]=m((t,e)=>t.reposRepoSubscribe(s,e),t=>t.reposRepoData,[s]);return o.status.type==="Error"?r.jsx(b,{error:o.status.error}):o.repo!==void 0?r.jsx(D,{repo:o.repo}):r.jsx(k,{})}),$=a.memo(()=>{const o=h().repoId;return o===void 0?null:r.jsx(v,{repoId:o},o)});export{$ as RepoConfigBackupPage};
